// GitHub: https://github.com/tnajdek/zotero-api-client
// CDN: https://unpkg.com/zotero-api-client@0.37.1/dist/zotero-api-client.js
// This library is available globally as ZoteroApiClient
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ZoteroApiClient={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i=function(e){return"function"==typeof e},o={},s=function(e){try{return!!e()}catch(e){return!0}},a=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u={},c={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l=f&&!c.call({1:2},1);u.f=l?function(e){var t=f(this,e);return!!t&&t.enumerable}:c;var p,h,d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},y={}.toString,v=function(e){return y.call(e).slice(8,-1)},g=v,m="".split,b=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},w=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==g(e)?m.call(e,""):Object(e)}:Object,O=b,S=function(e){return w(O(e))},j=i,P=function(e){return"object"==typeof e?null!==e:j(e)},T={},A=T,R=n,E=i,x=function(e){return E(e)?e:void 0},_=function(e,t){return arguments.length<2?x(A[e])||x(R[e]):A[e]&&A[e][t]||R[e]&&R[e][t]},C=_("navigator","userAgent")||"",L=n,M=C,I=L.process,k=L.Deno,U=I&&I.versions||k&&k.version,F=U&&U.v8;F?h=(p=F.split("."))[0]<4?1:p[0]+p[1]:M&&(!(p=M.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=M.match(/Chrome\/(\d+)/))&&(h=p[1]);var D=h&&+h,K=D,B=s,V=!!Object.getOwnPropertySymbols&&!B((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&K&&K<41})),N=V&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,z=i,G=_,W=N?function(e){return"symbol"==typeof e}:function(e){var t=G("Symbol");return z(t)&&Object(e)instanceof t},q=function(e){try{return String(e)}catch(e){return"Object"}},H=i,$=q,X=function(e){if(H(e))return e;throw TypeError($(e)+" is not a function")},Y=X,Z=function(e,t){var r=e[t];return null==r?void 0:Y(r)},Q=i,J=P,ee={exports:{}},te=n,re=function(e,t){try{Object.defineProperty(te,e,{value:t,configurable:!0,writable:!0})}catch(r){te[e]=t}return t},ne="__core-js_shared__",ie=n[ne]||re(ne,{}),oe=ie;(ee.exports=function(e,t){return oe[e]||(oe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.2",mode:"pure",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var se=b,ae=function(e){return Object(se(e))},ue=ae,ce={}.hasOwnProperty,fe=Object.hasOwn||function(e,t){return ce.call(ue(e),t)},le=0,pe=Math.random(),he=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++le+pe).toString(36)},de=n,ye=ee.exports,ve=fe,ge=he,me=V,be=N,we=ye("wks"),Oe=de.Symbol,Se=be?Oe:Oe&&Oe.withoutSetter||ge,je=function(e){return ve(we,e)&&(me||"string"==typeof we[e])||(me&&ve(Oe,e)?we[e]=Oe[e]:we[e]=Se("Symbol."+e)),we[e]},Pe=P,Te=W,Ae=Z,Re=function(e,t){var r,n;if("string"===t&&Q(r=e.toString)&&!J(n=r.call(e)))return n;if(Q(r=e.valueOf)&&!J(n=r.call(e)))return n;if("string"!==t&&Q(r=e.toString)&&!J(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},Ee=je("toPrimitive"),xe=function(e,t){if(!Pe(e)||Te(e))return e;var r,n=Ae(e,Ee);if(n){if(void 0===t&&(t="default"),r=n.call(e,t),!Pe(r)||Te(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),Re(e,t)},_e=W,Ce=function(e){var t=xe(e,"string");return _e(t)?t:String(t)},Le=P,Me=n.document,Ie=Le(Me)&&Le(Me.createElement),ke=function(e){return Ie?Me.createElement(e):{}},Ue=ke,Fe=!a&&!s((function(){return 7!=Object.defineProperty(Ue("div"),"a",{get:function(){return 7}}).a})),De=a,Ke=u,Be=d,Ve=S,Ne=Ce,ze=fe,Ge=Fe,We=Object.getOwnPropertyDescriptor;o.f=De?We:function(e,t){if(e=Ve(e),t=Ne(t),Ge)try{return We(e,t)}catch(e){}if(ze(e,t))return Be(!Ke.f.call(e,t),e[t])};var qe=s,He=i,$e=/#|\.prototype\./,Xe=function(e,t){var r=Ze[Ye(e)];return r==Je||r!=Qe&&(He(t)?qe(t):!!t)},Ye=Xe.normalize=function(e){return String(e).replace($e,".").toLowerCase()},Ze=Xe.data={},Qe=Xe.NATIVE="N",Je=Xe.POLYFILL="P",et=Xe,tt=X,rt=function(e,t,r){if(tt(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},nt={},it=P,ot=function(e){if(it(e))return e;throw TypeError(String(e)+" is not an object")},st=a,at=Fe,ut=ot,ct=Ce,ft=Object.defineProperty;nt.f=st?ft:function(e,t,r){if(ut(e),t=ct(t),ut(r),at)try{return ft(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var lt,pt=nt,ht=d,dt=a?function(e,t,r){return pt.f(e,t,ht(1,r))}:function(e,t,r){return e[t]=r,e},yt=n,vt=i,gt=o.f,mt=et,bt=T,wt=rt,Ot=dt,St=fe,jt=function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},Pt=function(e,t){var r,n,i,o,s,a,u,c,f=e.target,l=e.global,p=e.stat,h=e.proto,d=l?yt:p?yt[f]:(yt[f]||{}).prototype,y=l?bt:bt[f]||Ot(bt,f,{})[f],v=y.prototype;for(i in t)r=!mt(l?i:f+(p?".":"#")+i,e.forced)&&d&&St(d,i),s=y[i],r&&(a=e.noTargetGet?(c=gt(d,i))&&c.value:d[i]),o=r&&a?a:t[i],r&&typeof s==typeof o||(u=e.bind&&r?wt(o,yt):e.wrap&&r?jt(o):h&&vt(o)?wt(Function.call,o):o,(e.sham||o&&o.sham||s&&s.sham)&&Ot(u,"sham",!0),Ot(y,i,u),h&&(St(bt,n=f+"Prototype")||Ot(bt,n,{}),Ot(bt[n],i,o),e.real&&v&&!v[i]&&Ot(v,i,o)))},Tt=ee.exports,At=he,Rt=Tt("keys"),Et=function(e){return Rt[e]||(Rt[e]=At(e))},xt=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),_t=fe,Ct=i,Lt=ae,Mt=xt,It=Et("IE_PROTO"),kt=Object.prototype,Ut=Mt?Object.getPrototypeOf:function(e){var t=Lt(e);if(_t(t,It))return t[It];var r=t.constructor;return Ct(r)&&t instanceof r?r.prototype:t instanceof Object?kt:null},Ft=i,Dt=ot,Kt=function(e){if("object"==typeof e||Ft(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")},Bt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return Dt(r),Kt(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),Vt=Math.ceil,Nt=Math.floor,zt=function(e){var t=+e;return t!=t||0===t?0:(t>0?Nt:Vt)(t)},Gt=zt,Wt=Math.max,qt=Math.min,Ht=zt,$t=Math.min,Xt=function(e){return e>0?$t(Ht(e),9007199254740991):0},Yt=function(e){return Xt(e.length)},Zt=S,Qt=function(e,t){var r=Gt(e);return r<0?Wt(r+t,0):qt(r,t)},Jt=Yt,er=function(e){return function(t,r,n){var i,o=Zt(t),s=Jt(o),a=Qt(n,s);if(e&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}},tr={includes:er(!0),indexOf:er(!1)},rr={},nr=fe,ir=S,or=tr.indexOf,sr=rr,ar=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ur=function(e,t){var r,n=ir(e),i=0,o=[];for(r in n)!nr(sr,r)&&nr(n,r)&&o.push(r);for(;t.length>i;)nr(n,r=t[i++])&&(~or(o,r)||o.push(r));return o},cr=ar,fr=Object.keys||function(e){return ur(e,cr)},lr=nt,pr=ot,hr=fr,dr=a?Object.defineProperties:function(e,t){pr(e);for(var r,n=hr(t),i=n.length,o=0;i>o;)lr.f(e,r=n[o++],t[r]);return e},yr=_("document","documentElement"),vr=ot,gr=dr,mr=ar,br=rr,wr=yr,Or=ke,Sr=Et("IE_PROTO"),jr=function(){},Pr=function(e){return"<script>"+e+"</"+"script>"},Tr=function(e){e.write(Pr("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ar=function(){try{lt=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ar="undefined"!=typeof document?document.domain&&lt?Tr(lt):((t=Or("iframe")).style.display="none",wr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Pr("document.F=Object")),e.close(),e.F):Tr(lt);for(var r=mr.length;r--;)delete Ar.prototype[mr[r]];return Ar()};br[Sr]=!0;var Rr=Object.create||function(e,t){var r;return null!==e?(jr.prototype=vr(e),r=new jr,jr.prototype=null,r[Sr]=e):r=Ar(),void 0===t?r:gr(r,t)},Er=P,xr=dt,_r={},Cr=_r,Lr=je("iterator"),Mr=Array.prototype,Ir={};Ir[je("toStringTag")]="z";var kr="[object z]"===String(Ir),Ur=kr,Fr=i,Dr=v,Kr=je("toStringTag"),Br="Arguments"==Dr(function(){return arguments}()),Vr=Ur?Dr:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Kr))?r:Br?Dr(t):"Object"==(n=Dr(t))&&Fr(t.callee)?"Arguments":n},Nr=Vr,zr=Z,Gr=_r,Wr=je("iterator"),qr=function(e){if(null!=e)return zr(e,Wr)||zr(e,"@@iterator")||Gr[Nr(e)]},Hr=X,$r=ot,Xr=qr,Yr=ot,Zr=Z,Qr=ot,Jr=function(e){return void 0!==e&&(Cr.Array===e||Mr[Lr]===e)},en=Yt,tn=rt,rn=function(e,t){var r=arguments.length<2?Xr(e):t;if(Hr(r))return $r(r.call(e));throw TypeError(String(e)+" is not iterable")},nn=qr,on=function(e,t,r){var n,i;Yr(e);try{if(!(n=Zr(e,"return"))){if("throw"===t)throw r;return r}n=n.call(e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return Yr(n),r},sn=function(e,t){this.stopped=e,this.result=t},an=function(e,t,r){var n,i,o,s,a,u,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),d=tn(t,f,1+l+h),y=function(e){return n&&on(n,"normal",e),new sn(!0,e)},v=function(e){return l?(Qr(e),h?d(e[0],e[1],y):d(e[0],e[1])):h?d(e,y):d(e)};if(p)n=e;else{if(!(i=nn(e)))throw TypeError(String(e)+" is not iterable");if(Jr(i)){for(o=0,s=en(e);s>o;o++)if((a=v(e[o]))&&a instanceof sn)return a;return new sn(!1)}n=rn(e,i)}for(u=n.next;!(c=u.call(n)).done;){try{a=v(c.value)}catch(e){on(n,"throw",e)}if("object"==typeof a&&a&&a instanceof sn)return a}return new sn(!1)},un=Vr,cn=function(e){if("Symbol"===un(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},fn=Pt,ln=Ut,pn=Bt,hn=Rr,dn=dt,yn=d,vn=function(e,t){Er(t)&&"cause"in t&&xr(e,"cause",e.cause)},gn=an,mn=cn,bn=function(e,t){var r=this,n=arguments.length>2?arguments[2]:void 0;if(!(r instanceof bn))return new bn(e,t,n);pn&&(r=pn(new Error(void 0),ln(r))),void 0!==t&&dn(r,"message",mn(t)),vn(r,n);var i=[];return gn(e,i.push,{that:i}),dn(r,"errors",i),r};bn.prototype=hn(Error.prototype,{constructor:yn(5,bn),message:yn(5,""),name:yn(5,"AggregateError")}),fn({global:!0},{AggregateError:bn});var wn=i,On=ie,Sn=Function.toString;wn(On.inspectSource)||(On.inspectSource=function(e){return Sn.call(e)});var jn,Pn,Tn,An=On.inspectSource,Rn=i,En=An,xn=n.WeakMap,_n=Rn(xn)&&/native code/.test(En(xn)),Cn=P,Ln=dt,Mn=fe,In=ie,kn=Et,Un=rr,Fn="Object already initialized",Dn=n.WeakMap;if(_n||In.state){var Kn=In.state||(In.state=new Dn),Bn=Kn.get,Vn=Kn.has,Nn=Kn.set;jn=function(e,t){if(Vn.call(Kn,e))throw new TypeError(Fn);return t.facade=e,Nn.call(Kn,e,t),t},Pn=function(e){return Bn.call(Kn,e)||{}},Tn=function(e){return Vn.call(Kn,e)}}else{var zn=kn("state");Un[zn]=!0,jn=function(e,t){if(Mn(e,zn))throw new TypeError(Fn);return t.facade=e,Ln(e,zn,t),t},Pn=function(e){return Mn(e,zn)?e[zn]:{}},Tn=function(e){return Mn(e,zn)}}var Gn,Wn,qn,Hn={set:jn,get:Pn,has:Tn,enforce:function(e){return Tn(e)?Pn(e):jn(e,{})},getterFor:function(e){return function(t){var r;if(!Cn(t)||(r=Pn(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},$n=a,Xn=fe,Yn=Function.prototype,Zn=$n&&Object.getOwnPropertyDescriptor,Qn=Xn(Yn,"name"),Jn={EXISTS:Qn,PROPER:Qn&&"something"===function(){}.name,CONFIGURABLE:Qn&&(!$n||$n&&Zn(Yn,"name").configurable)},ei=dt,ti=function(e,t,r,n){n&&n.enumerable?e[t]=r:ei(e,t,r)},ri=s,ni=i,ii=Rr,oi=Ut,si=ti,ai=je("iterator"),ui=!1;[].keys&&("next"in(qn=[].keys())?(Wn=oi(oi(qn)))!==Object.prototype&&(Gn=Wn):ui=!0);var ci=null==Gn||ri((function(){var e={};return Gn[ai].call(e)!==e}));ni((Gn=ci?{}:ii(Gn))[ai])||si(Gn,ai,(function(){return this}));var fi={IteratorPrototype:Gn,BUGGY_SAFARI_ITERATORS:ui},li=Vr,pi=kr?{}.toString:function(){return"[object "+li(this)+"]"},hi=kr,di=nt.f,yi=dt,vi=fe,gi=pi,mi=je("toStringTag"),bi=function(e,t,r,n){if(e){var i=r?e:e.prototype;vi(i,mi)||di(i,mi,{configurable:!0,value:t}),n&&!hi&&yi(i,"toString",gi)}},wi=fi.IteratorPrototype,Oi=Rr,Si=d,ji=bi,Pi=_r,Ti=function(){return this},Ai=Pt,Ri=function(e,t,r){var n=t+" Iterator";return e.prototype=Oi(wi,{next:Si(1,r)}),ji(e,n,!1,!0),Pi[n]=Ti,e},Ei=Ut,xi=bi,_i=ti,Ci=_r,Li=Jn.PROPER,Mi=fi.BUGGY_SAFARI_ITERATORS,Ii=je("iterator"),ki="keys",Ui="values",Fi="entries",Di=function(){return this},Ki=function(e,t,r,n,i,o,s){Ri(r,t,n);var a,u,c,f=function(e){if(e===i&&y)return y;if(!Mi&&e in h)return h[e];switch(e){case ki:case Ui:case Fi:return function(){return new r(this,e)}}return function(){return new r(this)}},l=t+" Iterator",p=!1,h=e.prototype,d=h[Ii]||h["@@iterator"]||i&&h[i],y=!Mi&&d||f(i),v="Array"==t&&h.entries||d;if(v&&(a=Ei(v.call(new e)))!==Object.prototype&&a.next&&(xi(a,l,!0,!0),Ci[l]=Di),Li&&i==Ui&&d&&d.name!==Ui&&(p=!0,y=function(){return d.call(this)}),i)if(u={values:f(Ui),keys:o?y:f(ki),entries:f(Fi)},s)for(c in u)(Mi||p||!(c in h))&&_i(h,c,u[c]);else Ai({target:t,proto:!0,forced:Mi||p},u);return s&&h[Ii]!==y&&_i(h,Ii,y,{name:i}),Ci[t]=y,u},Bi=S,Vi=_r,Ni=Hn,zi=Ki,Gi="Array Iterator",Wi=Ni.set,qi=Ni.getterFor(Gi);zi(Array,"Array",(function(e,t){Wi(this,{type:Gi,target:Bi(e),index:0,kind:t})}),(function(){var e=qi(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),Vi.Arguments=Vi.Array;var Hi=n.Promise,$i=ti,Xi=_,Yi=nt,Zi=a,Qi=je("species"),Ji=je("iterator"),eo=!1;try{var to=0,ro={next:function(){return{done:!!to++}},return:function(){eo=!0}};ro[Ji]=function(){return this},Array.from(ro,(function(){throw 2}))}catch(e){}var no,io,oo,so,ao=s,uo=i,co=Vr,fo=An,lo=[],po=_("Reflect","construct"),ho=/^\s*(?:class|function)\b/,yo=ho.exec,vo=!ho.exec((function(){})),go=function(e){if(!uo(e))return!1;try{return po(Object,lo,e),!0}catch(e){return!1}},mo=!po||ao((function(){var e;return go(go.call)||!go(Object)||!go((function(){e=!0}))||e}))?function(e){if(!uo(e))return!1;switch(co(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return vo||!!yo.call(ho,fo(e))}:go,bo=mo,wo=q,Oo=ot,So=function(e){if(bo(e))return e;throw TypeError(wo(e)+" is not a constructor")},jo=je("species"),Po=function(e,t){var r,n=Oo(e).constructor;return void 0===n||null==(r=Oo(n)[jo])?t:So(r)},To=/(?:ipad|iphone|ipod).*applewebkit/i.test(C),Ao="process"==v(n.process),Ro=n,Eo=i,xo=s,_o=rt,Co=yr,Lo=ke,Mo=To,Io=Ao,ko=Ro.setImmediate,Uo=Ro.clearImmediate,Fo=Ro.process,Do=Ro.MessageChannel,Ko=Ro.Dispatch,Bo=0,Vo={},No="onreadystatechange";try{no=Ro.location}catch(e){}var zo=function(e){if(Vo.hasOwnProperty(e)){var t=Vo[e];delete Vo[e],t()}},Go=function(e){return function(){zo(e)}},Wo=function(e){zo(e.data)},qo=function(e){Ro.postMessage(String(e),no.protocol+"//"+no.host)};ko&&Uo||(ko=function(e){for(var t=[],r=arguments.length,n=1;r>n;)t.push(arguments[n++]);return Vo[++Bo]=function(){(Eo(e)?e:Function(e)).apply(void 0,t)},io(Bo),Bo},Uo=function(e){delete Vo[e]},Io?io=function(e){Fo.nextTick(Go(e))}:Ko&&Ko.now?io=function(e){Ko.now(Go(e))}:Do&&!Mo?(so=(oo=new Do).port2,oo.port1.onmessage=Wo,io=_o(so.postMessage,so,1)):Ro.addEventListener&&Eo(Ro.postMessage)&&!Ro.importScripts&&no&&"file:"!==no.protocol&&!xo(qo)?(io=qo,Ro.addEventListener("message",Wo,!1)):io=No in Lo("script")?function(e){Co.appendChild(Lo("script")).onreadystatechange=function(){Co.removeChild(this),zo(e)}}:function(e){setTimeout(Go(e),0)});var Ho,$o,Xo,Yo,Zo,Qo,Jo,es,ts={set:ko,clear:Uo},rs=n,ns=/ipad|iphone|ipod/i.test(C)&&void 0!==rs.Pebble,is=/web0s(?!.*chrome)/i.test(C),os=n,ss=o.f,as=ts.set,us=To,cs=ns,fs=is,ls=Ao,ps=os.MutationObserver||os.WebKitMutationObserver,hs=os.document,ds=os.process,ys=os.Promise,vs=ss(os,"queueMicrotask"),gs=vs&&vs.value;gs||(Ho=function(){var e,t;for(ls&&(e=ds.domain)&&e.exit();$o;){t=$o.fn,$o=$o.next;try{t()}catch(e){throw $o?Yo():Xo=void 0,e}}Xo=void 0,e&&e.enter()},us||ls||fs||!ps||!hs?!cs&&ys&&ys.resolve?((Jo=ys.resolve(void 0)).constructor=ys,es=Jo.then,Yo=function(){es.call(Jo,Ho)}):Yo=ls?function(){ds.nextTick(Ho)}:function(){as.call(os,Ho)}:(Zo=!0,Qo=hs.createTextNode(""),new ps(Ho).observe(Qo,{characterData:!0}),Yo=function(){Qo.data=Zo=!Zo}));var ms=gs||function(e){var t={fn:e,next:void 0};Xo&&(Xo.next=t),$o||($o=t,Yo()),Xo=t},bs={},ws=X,Os=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=ws(t),this.reject=ws(r)};bs.f=function(e){return new Os(e)};var Ss,js,Ps,Ts=ot,As=P,Rs=bs,Es=function(e,t){if(Ts(e),As(t)&&t.constructor===e)return t;var r=Rs.f(e);return(0,r.resolve)(t),r.promise},xs=n,_s=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Cs="object"==typeof window,Ls=Pt,Ms=n,Is=_,ks=Hi,Us=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:$i(e,n,t[n],r);return e},Fs=bi,Ds=function(e){var t=Xi(e),r=Yi.f;Zi&&t&&!t[Qi]&&r(t,Qi,{configurable:!0,get:function(){return this}})},Ks=X,Bs=i,Vs=P,Ns=function(e,t,r){if(e instanceof t)return e;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")},zs=An,Gs=an,Ws=function(e,t){if(!t&&!eo)return!1;var r=!1;try{var n={};n[Ji]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},qs=Po,Hs=ts.set,$s=ms,Xs=Es,Ys=function(e,t){var r=xs.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},Zs=bs,Qs=_s,Js=Hn,ea=et,ta=Cs,ra=Ao,na=D,ia=je("species"),oa="Promise",sa=Js.get,aa=Js.set,ua=Js.getterFor(oa),ca=ks&&ks.prototype,fa=ks,la=ca,pa=Ms.TypeError,ha=Ms.document,da=Ms.process,ya=Zs.f,va=ya,ga=!!(ha&&ha.createEvent&&Ms.dispatchEvent),ma=Bs(Ms.PromiseRejectionEvent),ba="unhandledrejection",wa=ea(oa,(function(){var e=zs(fa),t=e!==String(fa);if(!t&&66===na)return!0;if(!la.finally)return!0;if(na>=51&&/native code/.test(e))return!1;var r=new fa((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[ia]=n,!(r.then((function(){}))instanceof n)||!t&&ta&&!ma})),Oa=wa||!Ws((function(e){fa.all(e).catch((function(){}))})),Sa=function(e){var t;return!(!Vs(e)||!Bs(t=e.then))&&t},ja=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;$s((function(){for(var n=e.value,i=1==e.state,o=0;r.length>o;){var s,a,u,c=r[o++],f=i?c.ok:c.fail,l=c.resolve,p=c.reject,h=c.domain;try{f?(i||(2===e.rejection&&Ra(e),e.rejection=1),!0===f?s=n:(h&&h.enter(),s=f(n),h&&(h.exit(),u=!0)),s===c.promise?p(pa("Promise-chain cycle")):(a=Sa(s))?a.call(s,l,p):l(s)):p(n)}catch(e){h&&!u&&h.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Ta(e)}))}},Pa=function(e,t,r){var n,i;ga?((n=ha.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Ms.dispatchEvent(n)):n={promise:t,reason:r},!ma&&(i=Ms["on"+e])?i(n):e===ba&&Ys("Unhandled promise rejection",r)},Ta=function(e){Hs.call(Ms,(function(){var t,r=e.facade,n=e.value;if(Aa(e)&&(t=Qs((function(){ra?da.emit("unhandledRejection",n,r):Pa(ba,r,n)})),e.rejection=ra||Aa(e)?2:1,t.error))throw t.value}))},Aa=function(e){return 1!==e.rejection&&!e.parent},Ra=function(e){Hs.call(Ms,(function(){var t=e.facade;ra?da.emit("rejectionHandled",t):Pa("rejectionhandled",t,e.value)}))},Ea=function(e,t,r){return function(n){e(t,n,r)}},xa=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,ja(e,!0))},_a=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw pa("Promise can't be resolved itself");var n=Sa(t);n?$s((function(){var r={done:!1};try{n.call(t,Ea(_a,r,e),Ea(xa,r,e))}catch(t){xa(r,t,e)}})):(e.value=t,e.state=1,ja(e,!1))}catch(t){xa({done:!1},t,e)}}};wa&&(la=(fa=function(e){Ns(this,fa,oa),Ks(e),Ss.call(this);var t=sa(this);try{e(Ea(_a,t),Ea(xa,t))}catch(e){xa(t,e)}}).prototype,(Ss=function(e){aa(this,{type:oa,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Us(la,{then:function(e,t){var r=ua(this),n=ya(qs(this,fa));return n.ok=!Bs(e)||e,n.fail=Bs(t)&&t,n.domain=ra?da.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&ja(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),js=function(){var e=new Ss,t=sa(e);this.promise=e,this.resolve=Ea(_a,t),this.reject=Ea(xa,t)},Zs.f=ya=function(e){return e===fa||e===Ps?new js(e):va(e)}),Ls({global:!0,wrap:!0,forced:wa},{Promise:fa}),Fs(fa,oa,!1,!0),Ds(oa),Ps=Is(oa),Ls({target:oa,stat:!0,forced:wa},{reject:function(e){var t=ya(this);return t.reject.call(void 0,e),t.promise}}),Ls({target:oa,stat:!0,forced:true},{resolve:function(e){return Xs(this===Ps?fa:this,e)}}),Ls({target:oa,stat:!0,forced:Oa},{all:function(e){var t=this,r=ya(t),n=r.resolve,i=r.reject,o=Qs((function(){var r=Ks(t.resolve),o=[],s=0,a=1;Gs(e,(function(e){var u=s++,c=!1;o.push(void 0),a++,r.call(t,e).then((function(e){c||(c=!0,o[u]=e,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=ya(t),n=r.reject,i=Qs((function(){var i=Ks(t.resolve);Gs(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var Ca=X,La=bs,Ma=_s,Ia=an;Pt({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=La.f(t),n=r.resolve,i=r.reject,o=Ma((function(){var r=Ca(t.resolve),i=[],o=0,s=1;Ia(e,(function(e){var a=o++,u=!1;i.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,i[a]={status:"fulfilled",value:e},--s||n(i))}),(function(e){u||(u=!0,i[a]={status:"rejected",reason:e},--s||n(i))}))})),--s||n(i)}));return o.error&&i(o.value),r.promise}});var ka=X,Ua=_,Fa=bs,Da=_s,Ka=an,Ba="No one promise resolved";Pt({target:"Promise",stat:!0},{any:function(e){var t=this,r=Fa.f(t),n=r.resolve,i=r.reject,o=Da((function(){var r=ka(t.resolve),o=[],s=0,a=1,u=!1;Ka(e,(function(e){var c=s++,f=!1;o.push(void 0),a++,r.call(t,e).then((function(e){f||u||(u=!0,n(e))}),(function(e){f||u||(f=!0,o[c]=e,--a||i(new(Ua("AggregateError"))(o,Ba)))}))})),--a||i(new(Ua("AggregateError"))(o,Ba))}));return o.error&&i(o.value),r.promise}});var Va=Hi,Na=_,za=i,Ga=Po,Wa=Es;Pt({target:"Promise",proto:!0,real:!0,forced:!!Va&&s((function(){Va.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Ga(this,Na("Promise")),r=za(e);return this.then(r?function(r){return Wa(t,e()).then((function(){return r}))}:e,r?function(r){return Wa(t,e()).then((function(){throw r}))}:e)}});var qa=zt,Ha=cn,$a=b,Xa=function(e){return function(t,r){var n,i,o=Ha($a(t)),s=qa(r),a=o.length;return s<0||s>=a?e?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?e?o.charAt(s):n:e?o.slice(s,s+2):i-56320+(n-55296<<10)+65536}},Ya={codeAt:Xa(!1),charAt:Xa(!0)}.charAt,Za=cn,Qa=Hn,Ja=Ki,eu="String Iterator",tu=Qa.set,ru=Qa.getterFor(eu);Ja(String,"String",(function(e){tu(this,{type:eu,string:Za(e),index:0})}),(function(){var e,t=ru(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=Ya(r,n),t.index+=e.length,{value:e,done:!1})}));var nu=T.Promise,iu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ou=n,su=Vr,au=dt,uu=_r,cu=je("toStringTag");for(var fu in iu){var lu=ou[fu],pu=lu&&lu.prototype;pu&&su(pu)!==cu&&au(pu,cu,fu),uu[fu]=uu.Array}var hu=nu,du=bs,yu=_s;Pt({target:"Promise",stat:!0},{try:function(e){var t=du.f(this),r=yu(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var vu=hu;function gu(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):vu.resolve(u).then(n,i)}function mu(e){return function(){var t=this,r=arguments;return new vu((function(n,i){var o=e.apply(t,r);function s(e){gu(o,n,i,s,a,"next",e)}function a(e){gu(o,n,i,s,a,"throw",e)}s(void 0)}))}}var bu={exports:{}};Pt({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:nt.f});var wu=T.Object,Ou=bu.exports=function(e,t,r){return wu.defineProperty(e,t,r)};wu.defineProperty.sham&&(Ou.sham=!0);var Su=bu.exports;function ju(e,t,r){return t in e?Su(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pu=hu,Tu="\t\n\v\f\r  € 	
/_ \u2028\u2029\ufeff",Au=b,Ru=cn,Eu="[\t\n\v\f\r  € 	
/_ \u2028\u2029\ufeff]",xu=RegExp("^"+Eu+Eu+"*"),_u=RegExp(Eu+Eu+"*$"),Cu=function(e){return function(t){var r=Ru(Au(t));return 1&e&&(r=r.replace(xu,"")),2&e&&(r=r.replace(_u,"")),r}},Lu={start:Cu(1),end:Cu(2),trim:Cu(3)},Mu=Jn.PROPER,Iu=s,ku=Tu,Uu=Lu.trim;Pt({target:"String",proto:!0,forced:function(e){return Iu((function(){return!!ku[e]()||"…"!=="…"[e]()||Mu&&ku[e].name!==e}))}("trim")},{trim:function(){return Uu(this)}});var Fu=T,Du=function(e){return Fu[e+"Prototype"]}("String").trim,Ku=String.prototype,Bu=function(e){var t=e.trim;return"string"==typeof e||e===Ku||e instanceof String&&t===Ku.trim?Du:t},Vu={exports:{}};!function(e,t){e.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&i|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n&o|i&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((o=((o+=((r=((r+=(n^i^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((o=((o+=(n^((r=((r+=(i^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((i=((i+=(r^(o|~n))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function i(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function o(e){var t,i,o,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(f,n(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(f,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,r(f,o),f}function s(e){var t,n,o,s,a,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(f,i(e.subarray(t-64,t)));for(n=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(f,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,o[14]=a,o[15]=u,r(f,o),f}function a(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function f(e,t){var r,n=e.length,i=new ArrayBuffer(n),o=new Uint8Array(i);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:i}function l(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function p(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function h(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function d(){this.reset()}return u(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var i,o,s,a,u=this.byteLength,c=t(r,u),f=u;return n!==e&&(f=t(n,u)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,c,i),s.set(a),o)}}(),d.prototype.append=function(e){return this.appendBinary(c(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},d.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),r=u(this._hash),e&&(r=h(r)),this.reset(),r},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,t){var n,i,o,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,e),s=0;s<16;s+=1)e[s]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=i,e[15]=o,r(this._hash,e)},d.hash=function(e,t){return d.hashBinary(c(e),t)},d.hashBinary=function(e,t){var r=u(o(e));return t?h(r):r},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(e){var t,n=p(this._buff.buffer,e,!0),o=n.length;for(this._length+=e.byteLength,t=64;t<=o;t+=64)r(this._hash,i(n.subarray(t-64,t)));return this._buff=t-64<o?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,i),r=u(this._hash),e&&(r=h(r)),this.reset(),r},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e=d.prototype.getState.call(this);return e.buff=l(e.buff),e},d.ArrayBuffer.prototype.setState=function(e){return e.buff=f(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){var r=u(s(new Uint8Array(e)));return t?h(r):r},d}()}(Vu);var Nu=Vu.exports,zu=n,Gu=s,Wu=cn,qu=Lu.trim,Hu=Tu,$u=zu.parseInt,Xu=zu.Symbol,Yu=Xu&&Xu.iterator,Zu=/^[+-]?0[Xx]/,Qu=8!==$u(Hu+"08")||22!==$u(Hu+"0x16")||Yu&&!Gu((function(){$u(Object(Yu))}))?function(e,t){var r=qu(Wu(e));return $u(r,t>>>0||(Zu.test(r)?16:10))}:$u;Pt({global:!0,forced:parseInt!=Qu},{parseInt:Qu});var Ju=T.parseInt;function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach((function(t){ju(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class rc{constructor(e,t,r){this.raw=e,this.options=t,this.response=r}getResponseType(){return"ApiResponse"}getData(){return this.raw}getLinks(){return"links"in this.raw?this.raw.links:null}getMeta(){return"meta"in this.raw?this.raw.meta:null}getVersion(){return Ju(this.response.headers.get("Last-Modified-Version"),10)}}class nc extends rc{getResponseType(){return"SingleReadResponse"}getData(){return this.raw&&"data"in this.raw?this.raw.data:this.raw}}class ic extends rc{getResponseType(){return"MultiReadResponse"}getData(){return this.raw.map((e=>"data"in e?e.data:"tag"in e?{tag:e.tag}:e))}getLinks(){return this.raw.map((e=>"links"in e&&e.links||null))}getMeta(){return this.raw.map((e=>"meta"in e&&e.meta||null))}}class oc extends rc{getResponseType(){return"SingleWriteResponse"}getData(){return tc(tc({},this.options.body),{},{version:Ju(this.response.headers.get("Last-Modified-Version"),10)})}}class sc extends rc{getResponseType(){return"MultiWriteResponse"}isSuccess(){return 0===Object.keys(this.raw.failed).length}getData(){return this.options.body.map(((e,t)=>{if((t=t.toString())in this.raw.success){var r=this.raw.successful&&this.raw.successful[t]||{};return tc(tc(tc({},e),r.data),{},{key:this.raw.success[t],version:Ju(this.response.headers.get("Last-Modified-Version"),10)})}return e}))}getLinks(){return this.options.body.map(((e,t)=>{if("successful"in this.raw){var r=this.raw.successful[t.toString()];if(r)return r.links||{}}return null}))}getMeta(){return this.options.body.map(((e,t)=>{if("successful"in this.raw){var r=this.raw.successful[t.toString()];if(r)return r.meta||{}}return null}))}getErrors(){var e={};for(var t of Object.keys(this.raw.failed))e[Ju(t,10)]=this.raw.failed[t];return e}getEntityByKey(e){var t=this.options.body.findIndex((t=>t.key===e));if(t>-1)return this.getEntityByIndex(t);throw new Error("Key ".concat(e," is not present in the request"))}getEntityByIndex(e){if("string"==typeof e&&(e=Ju(e,10)),e.toString()in this.raw.success){var t=this.raw.successful&&this.raw.successful[e.toString()]||{};return tc(tc(tc({},this.options.body[e]),t.data),{},{key:this.raw.success[e],version:Ju(this.response.headers.get("Last-Modified-Version"),10)})}if(e.toString()in this.raw.unchanged)return this.options.body[e];if(e.toString()in this.raw.failed)throw new Error("".concat(this.raw.failed[e.toString()].code,": ").concat(this.raw.failed[e.toString()].message));throw new Error("Index ".concat(e," is not present in the reponse"))}}class ac extends rc{getResponseType(){return"DeleteResponse"}}class uc extends rc{constructor(e,t,r,n,i){super(e,t,r),this.uploadResponse=n,this.registerResponse=i}getResponseType(){return"FileUploadResponse"}getVersion(){return this.registerResponse?Ju(this.registerResponse.headers.get("Last-Modified-Version"),10):Ju(this.response.headers.get("Last-Modified-Version"),10)}}class cc extends rc{getResponseType(){return"FileDownloadResponse"}}class fc extends rc{getResponseType(){return"FileUrlResponse"}}class lc extends rc{constructor(e,t){super(e,t,e)}getResponseType(){return"RawApiResponse"}}class pc extends rc{getResponseType(){return"PretendResponse"}getVersion(){return null}}class hc extends Error{constructor(e,t,r,n){super(e),this.response=r,this.reason=t,this.message=e,this.options=n}getResponseType(){return"ErrorResponse"}}function dc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(r),!0).forEach((function(t){ju(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vc={authorization:"Authorization",contentType:"Content-Type",ifMatch:"If-Match",ifModifiedSinceVersion:"If-Modified-Since-Version",ifNoneMatch:"If-None-Match",ifUnmodifiedSinceVersion:"If-Unmodified-Since-Version",zoteroApiKey:"Zotero-API-Key",zoteroWriteToken:"Zotero-Write-Token"},gc=["tag","itemTag"],mc=["collectionKey","content","direction","format","include","includeTrashed","itemKey","itemQ","itemQMode","itemTag","itemType","limit","linkMode","locale","q","qmode","searchKey","since","sort","start","style","tag"],bc=["body","cache","credentials","method","mode","redirect","signal"],wc=[{name:"library",urlPart:"library",isKeyResource:!0},{name:"collections",urlPart:"collections",isKeyResource:!0},{name:"publications",urlPart:"publications",isKeyResource:!1},{name:"items",urlPart:"items",isKeyResource:!0},{name:"searches",urlPart:"searches",isKeyResource:!0},{name:"top",urlPart:"top",isKeyResource:!1},{name:"trash",urlPart:"trash",isKeyResource:!1},{name:"tags",urlPart:"tags",isKeyResource:!0},{name:"children",urlPart:"children",isKeyResource:!1},{name:"groups",urlPart:"groups",isKeyResource:!1},{name:"subcollections",urlPart:"collections",isKeyResource:!1},{name:"itemTypes",urlPart:"itemTypes",isKeyResource:!1},{name:"itemFields",urlPart:"itemFields",isKeyResource:!1},{name:"creatorFields",urlPart:"creatorFields",isKeyResource:!1},{name:"itemTypeFields",urlPart:"itemTypeFields",isKeyResource:!1},{name:"itemTypeCreatorTypes",urlPart:"itemTypeCreatorTypes",isKeyResource:!1},{name:"template",urlPart:"items/new",isKeyResource:!1},{name:"file",urlPart:"file",isKeyResource:!1},{name:"fileUrl",urlPart:"file/view/url",isKeyResource:!1},{name:"settings",urlPart:"settings",isKeyResource:!1},{name:"deleted",urlPart:"deleted",isKeyResource:!1}],Oc={apiAuthorityPart:"api.zotero.org",cache:"default",contentType:"application/json",credentials:"omit",format:"json",method:"get",mode:"cors",pretend:!1,redirect:"follow",resource:{},retry:0,retryDelay:null,uploadRegisterOnly:null},Sc=(e,t)=>t in e&&null!==e[t]&&void 0!==e[t],jc=function(){var e=mu((function*(e,t,r){var n=e.clone(),i=null;try{i=yield n.text()}catch(e){}throw new hc("".concat(r).concat(e.status,": ").concat(e.statusText),i,e,t)}));return function(t,r,n){return e.apply(this,arguments)}}(),Pc=e=>408==e.status||e.status>=500,Tc=e=>new Pu((t=>{setTimeout((()=>{t()}),1e3*e)})),Ac=function(){var e=mu((function*(e){var t;if("response"in e&&e.response)return e;var r=yc(yc({},Oc),e),n={};for(var i of Object.keys(vc))i in r&&(n[vc[i]]=r[i]);var o=(e=>{var t=[];for(var r of wc){var n=e[r.name];r.name in e&&("library"===r.name?"u"===n.charAt(0)?t.push("users",n.slice(1)):"g"===n.charAt(0)&&t.push("groups",n.slice(1)):(t.push(r.urlPart),r.isKeyResource&&e[r.name]&&t.push(n)))}return t.join("/")})(r.resource),s=(e=>{var t=[],r=function(r){e[r]&&(gc.includes(r)&&Array.isArray(e[r])?t.push(...e[r].map((e=>"".concat(r,"=").concat(encodeURIComponent(e))))):t.push("".concat(r,"=").concat(encodeURIComponent(e[r]))))};for(var n of mc)r(n);return t.length?"?"+t.join("&"):""})(r),a="https://".concat(r.apiAuthorityPart,"/").concat(o).concat(s),u={};for(var c of bc)"body"===c&&Sc(r,c)?u[c]=JSON.stringify(r[c]):u[c]=r[c];if(Sc(r,"body")&&Sc(r,"file"))throw new Error('Cannot use both "file" and "body" in a single request.');if(Sc(r,"file")&&Sc(r,"fileName")){var f=r.fileName,l=Nu.ArrayBuffer.hash(r.file),p=r.file.byteLength,h=r.mtime||Date.now();u.body="md5=".concat(l,"&filename=").concat(f,"&filesize=").concat(p,"&mtime=").concat(h)}if(!0===r.uploadRegisterOnly){var{fileName:d,fileSize:y,md5sum:v,mtime:g}=r;u.body="md5=".concat(v,"&filename=").concat(d,"&filesize=").concat(y,"&mtime=").concat(g)}if(u.method=u.method.toUpperCase(),u.headers=n,r.retryCount=0,r.pretend)return yc(yc({response:new pc({url:a,fetchConfig:u},r)},e),{},{source:"request"});var m,b=yield fetch(a,u);if(Pc(b)&&r.retry>0)for(var w=r.retry,O="number"==typeof r.retryDelay?r.retryDelay:1;w>0&&(yield Tc(O),r.retryCount++,b=yield fetch(a,u),Pc(b));)"number"!=typeof r.retryDelay&&(O*=2),w--;if(Sc(r,"file")&&Sc(r,"fileName")||!0===r.uploadRegisterOnly)if(b.ok){var S=yield b.json();if("exists"in S&&S.exists)t=new uc(S,r,b);else{if(!0===r.uploadRegisterOnly)throw new hc("API did not recognize provided file meta.","Attempted to register existing file, but API did not recognize provided file meta.",b,r);var j=new Uint8ClampedArray(S.prefix.split("").map((e=>e.charCodeAt(0)))),P=new Uint8ClampedArray(S.suffix.split("").map((e=>e.charCodeAt(0)))),T=new Uint8ClampedArray(j.byteLength+r.file.byteLength+P.byteLength);T.set(j,0),T.set(new Uint8ClampedArray(r.file),j.byteLength),T.set(P,j.byteLength+r.file.byteLength);var A=yield fetch(S.url,{headers:{[vc.contentType]:S.contentType},method:"post",body:T.buffer});if(201===A.status){var R=yield fetch(a,yc(yc({},u),{},{body:"upload=".concat(S.uploadKey)}));R.ok||(yield jc(R,r,"Upload stage 3: ")),t=new uc({},r,b,A,R)}else yield jc(A,r,"Upload stage 2: ")}}else yield jc(b,r,"Upload stage 1: ");else if((b.status<200||b.status>=400)&&(yield jc(b,r,"")),"json"===r.format){try{m=yield b.json()}catch(e){m=null}switch(r.method.toUpperCase()){default:t="library"in r.resource?m&&Array.isArray(m)?new ic(m,r,b):new nc(m,r,b):new rc(m,r,b);break;case"POST":case"PUT":case"PATCH":t=m&&"object"==typeof m&&"success"in m?new sc(m,r,b):new oc(m,r,b);break;case"DELETE":t=new ac(m,r,b)}}else if("file"in r.resource&&"GET"===r.method.toUpperCase()){var E=yield b.arrayBuffer();t=new cc(E,r,b)}else if("fileUrl"in r.resource&&"GET"===r.method.toUpperCase()){var x,_=yield b.text();t=new fc(Bu(x=_.replace("\n","")).call(x),r,b)}else t=new lc(b,r);return yc(yc({},e),{},{source:"request",response:t})}));return function(t){return e.apply(this,arguments)}}();function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(r),!0).forEach((function(t){ju(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}e.ApiResponse=rc,e.DeleteResponse=ac,e.ErrorResponse=hc,e.FileDownloadResponse=cc,e.FileUploadResponse=uc,e.FileUrlResponse=fc,e.MultiReadResponse=ic,e.MultiWriteResponse=sc,e.PretendResponse=pc,e.RawApiResponse=lc,e.SingleReadResponse=nc,e.SingleWriteResponse=oc,e.default=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ec({},t);return"executors"in r||this&&"executors"in this||(r.executors=[Ac]),e&&(r.zoteroApiKey=e),M.bind(this)(r)},t=function(){var e;if(arguments.length>1)switch(arguments[0].toLowerCase()){case"user":e="u".concat(arguments[1]);break;case"group":e="g".concat(arguments[1]);break;default:throw new Error("Unrecognized library type ".concat(arguments[0]))}else e=arguments[0];return I.bind(this)({library:e})},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I.bind(this)({items:e})},n=function(){return I.bind(this)({itemTypes:null})},i=function(){return I.bind(this)({itemFields:null})},o=function(){return I.bind(this)({creatorFields:null})},s=function(e){return I.bind(this)({itemTypeFields:null},e?{itemType:e}:{})},a=function(e){return I.bind(this)({itemTypeCreatorTypes:null},e?{itemType:e}:{})},u=function(e){return I.bind(this)({template:null},e?{itemType:e}:{})},c=function(e){return I.bind(this)({collections:e||null})},f=function(){return I.bind(this)({subcollections:null})},l=function(){return I.bind(this)({publications:null})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I.bind(this)({tags:e})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I.bind(this)({searches:e})},d=function(){return I.bind(this)({top:null})},y=function(){return I.bind(this)({trash:null})},v=function(){return I.bind(this)({children:null})},g=function(){return I.bind(this)({settings:null})},m=function(e){var t=Ec(Ec({},this.resource),{},{deleted:null});return M.bind(this)({since:e,resource:t})},b=function(){return I.bind(this)({groups:null})},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return M.bind(this)({version:e})},O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Ec(Ec({},this.resource),{},{file:null});return e&&t?M.bind(this)({format:null,[n?"ifMatch":"ifNoneMatch"]:n||"*",contentType:"application/x-www-form-urlencoded",fileName:e,file:t,resource:i,mtime:r}):M.bind(this)({format:null,resource:i})},S=function(e,t,r,n){var i=Ec(Ec({},this.resource),{},{file:null});return e&&void 0!==t&&void 0!==r&&n?M.bind(this)({contentType:"application/x-www-form-urlencoded",fileName:e,fileSize:t,format:null,ifMatch:n,md5sum:n,mtime:r,resource:i,uploadRegisterOnly:!0}):M.bind(this)({format:null,resource:i})},j=function(){var e=Ec(Ec({},this.resource),{},{fileUrl:null});return M.bind(this)({format:null,resource:e})},P=function(e){return U(k(this,"get",e))},T=function(e,t){return U(k(this,"post",t,e))},A=function(e,t){return U(k(this,"put",t,e))},R=function(e,t){return U(k(this,"patch",t,e))},E=function(e,t){return U(k(this,"delete",t,e))},x=function(){return this},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return U(k(this,e,Ec(Ec({},r),{},{pretend:!0}),t))},C=function(e){return e({config:this,functions:L,ef:M,efr:I,execute:U})},L={api:e,attachment:O,attachmentUrl:j,children:v,collections:c,creatorFields:o,delete:E,deleted:m,get:P,getConfig:x,groups:b,itemFields:i,items:r,itemTypeCreatorTypes:a,itemTypeFields:s,itemTypes:n,library:t,patch:R,post:T,pretend:_,publications:l,put:A,registerAttachment:S,searches:h,settings:g,subcollections:f,tags:p,template:u,top:d,trash:y,use:C,version:w},M=function(e){var t=Ec(Ec({},this),e),r={};for(var n in L)r[n]=L[n].bind(t);return r},I=function(e,t){return e=Ec(Ec({},this.resource),e),t=Ec(Ec({},t),{},{resource:e}),M.bind(this)(t)},k=function(e,t,r,n){var i,o,s=t.toLowerCase();switch(s){default:return"version"in(i=Ec(Ec(Ec({},e),r),{},{method:s}))&&(i.ifModifiedSinceVersion=i.version,delete i.version),i;case"post":case"put":case"patch":return"version"in(i=Ec(Ec(Ec({},e),r),{},{body:n,method:s}))&&(i.ifUnmodifiedSinceVersion=i.version,delete i.version),i;case"delete":if(i=Ec(Ec(Ec({},e),r),{},{method:s}),(o=n)&&!Array.isArray(o))throw new Error("Called delete() with ".concat(typeof o,", expected an Array"));if("version"in i&&(i.ifUnmodifiedSinceVersion=i.version,delete i.version),"resource"in i&&"items"in i.resource)a="itemKey";else if("resource"in i&&"collections"in i.resource)a="collectionKey";else if("resource"in i&&"tags"in i.resource)a="tag";else{if(!("resource"in i)||!("searches"in i.resource))throw new Error("Called delete() without first specifing what to delete");a="searchKey"}var a;if(o)i[a]=[...i[a]||[],...o];return i}},U=function(){var e=mu((function*(e){for(var t of e.executors)e=yield t(e);return e.response}));return function(t){return e.apply(this,arguments)}}();return e(...arguments)},e.request=Ac,Object.defineProperty(e,"__esModule",{value:!0})}));